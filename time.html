<!DOCTYPE html>
<html lang=en>
<head>
    <meta charset=utf-8>
    <title>HTML 5 PivotViewer Demos</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link href="style/pivotviewer.css" rel="stylesheet" type="text/css" />
    <link href="lib/leaflet/leaflet.css" rel="stylesheet" type="text/css" media="screen" />
    <script>
      Timeline_ajax_url="lib/simile-timeline/timeline_ajax/simile-ajax-api.js";
      Timeline_urlPrefix='lib/simile-timeline/timeline_js/';
      Timeline_parameters='bundle=true';
    </script>
    <script src="lib/simile-timeline/timeline_js/timeline-api.js"    
      type="text/javascript">
    </script>
    <script>SimileAjax.History.enabled = false;</script>
    <script src="lib/jquery/jquery-1.11.0.min.js" type="text/javascript"></script>
    <script src="lib/jquery-ui/jquery-ui-1.10.4.custom.min.js" type="text/javascript"></script>
    <script src="lib/modernizr/modernizr.custom.93916.js" type="text/javascript"></script>
    <script src="lib/easing/easing.js" type="text/javascript"></script>
    <script src="lib/jquery.mousewheel/jquery.mousewheel.min.js" type="text/javascript"></script>
    <script src="lib/jquery.tooltipster/jquery.tooltipster.min.js" type="text/javascript"></script>
    <script src="lib/colResizable/colResizable-1.3.min.js" type="text/javascript"></script>
    <script src="lib/purl-master/purl.js" type="text/javascript"></script>
    <script src="pivotviewer.js" type="text/javascript"></script>
    <script src="src/jsonloader.js" type="text/javascript"></script>
    <script src="src/views/simpleimage.js" type="text/javascript"></script>
</head>
<body onload="init()">
    <h1>HTML5 Citrus Rally Data Pivot Demo</h1>
	<div id="pivotviewer" style="height:600px;">
        </div>
            <script type="text/javascript">
                function getParameterByName(name) {
                    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                    var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                            results = regex.exec(location.search);
                    return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                }
                //https://rally1.rallydev.com/slm/webservice/v2.0/artifact?project%20=202870644941&query=(ScheduleState%20=%20%22Defined%22)&pagesize=100
                function init(){
                    currentProject = getParameterByName('projectId');
                    $('#pivotviewer').PivotViewer({
                        //Loader: new PivotViewer.Models.Loaders.JSONLoader("http://localhost:7001/slm/webservice/v2.0/hierarchicalrequirement?projectId="+currentProject),
                        Loader: new PivotViewer.Models.Loaders.JSONLoader("https://rally1.rallydev.com/slm/webservice/v2.0/artifact?project%20=202870644941&query=(ScheduleState%20=%20%22Defined%22)&pagesize=200"),
                        ImageController: new PivotViewer.Views.SimpleImageController(),
                        ViewerState: "$view$=1"
                    });
                }
            </script>
</body>
</html>
